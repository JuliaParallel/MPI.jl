<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Buffers · MPI.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="MPI.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">MPI.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">MPI.jl</a></li><li><a class="tocitem" href="../../configuration/">Configuration</a></li><li><a class="tocitem" href="../../usage/">Usage</a></li><li><a class="tocitem" href="../../knownissues/">Known issues</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/01-hello/">Hello world</a></li><li><a class="tocitem" href="../../examples/02-broadcast/">Broadcast</a></li><li><a class="tocitem" href="../../examples/03-reduce/">Reduce</a></li><li><a class="tocitem" href="../../examples/04-sendrecv/">Send/receive</a></li><li><a class="tocitem" href="../../examples/05-job_schedule/">Job Scheduling</a></li><li><a class="tocitem" href="../../examples/06-scatterv/">Scatterv and Gatherv</a></li><li><a class="tocitem" href="../../examples/07-rma_active/">Active RMA</a></li><li><a class="tocitem" href="../../examples/08-rma_passive/">Passive RMA</a></li><li><a class="tocitem" href="../../examples/09-graph_communication/">Graph Communication</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../mpipreferences/">MPIPreferences.jl</a></li><li><a class="tocitem" href="../library/">Library information</a></li><li><a class="tocitem" href="../environment/">Environment</a></li><li><a class="tocitem" href="../misc/">Miscellanea</a></li><li><a class="tocitem" href="../comm/">Communicators</a></li><li class="is-active"><a class="tocitem" href>Buffers</a></li><li><a class="tocitem" href="../pointtopoint/">Point-to-point communication</a></li><li><a class="tocitem" href="../collective/">Collective communication</a></li><li><a class="tocitem" href="../onesided/">One-sided communication</a></li><li><a class="tocitem" href="../topology/">Topology</a></li><li><a class="tocitem" href="../io/">I/O</a></li><li><a class="tocitem" href="../advanced/">Advanced</a></li><li><a class="tocitem" href="../api/">Low-level API</a></li></ul></li><li><a class="tocitem" href="../../refindex/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Reference</a></li><li class="is-active"><a href>Buffers</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Buffers</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaParallel/MPI.jl/blob/master/docs/src/reference/buffers.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Buffers"><a class="docs-heading-anchor" href="#Buffers">Buffers</a><a id="Buffers-1"></a><a class="docs-heading-anchor-permalink" href="#Buffers" title="Permalink"></a></h1><p>Buffers are used for sending and receiving data. MPI.jl provides the following buffer types:</p><article class="docstring"><header><a class="docstring-binding" id="MPI.IN_PLACE" href="#MPI.IN_PLACE"><code>MPI.IN_PLACE</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">MPI.IN_PLACE</code></pre><p>A sentinel value that can be passed as a buffer argument for certain collective operations to use the same buffer for send and receive operations.</p><ul><li><p><a href="../collective/#MPI.Scatter!"><code>Scatter!</code></a> and <a href="../collective/#MPI.Scatterv!"><code>Scatterv!</code></a>: can be used as the <code>recvbuf</code> argument on the root process.</p></li><li><p><a href="../collective/#MPI.Gather!"><code>Gather!</code></a> and <a href="../collective/#MPI.Gatherv!"><code>Gatherv!</code></a>: can be used as the <code>sendbuf</code> argument on the root process.</p></li><li><p><a href="../collective/#MPI.Allgather!"><code>Allgather!</code></a>, <a href="../collective/#MPI.Allgatherv!"><code>Allgatherv!</code></a>, <a href="../collective/#MPI.Alltoall!"><code>Alltoall!</code></a> and <a href="../collective/#MPI.Alltoallv!"><code>Alltoallv!</code></a>: can be used as the <code>sendbuf</code> argument on all processes.</p></li><li><p><a href="../collective/#MPI.Reduce!"><code>Reduce!</code></a> (root only), <a href="../collective/#MPI.Allreduce!"><code>Allreduce!</code></a>, <a href="../collective/#MPI.Scan!"><code>Scan!</code></a> and <a href="../collective/#MPI.Exscan!"><code>Exscan!</code></a>: can be used as <code>sendbuf</code> argument.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/b6a278be622dd75c233f87bfe3e34d88f3919391/src/buffers.jl#L60-L78">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MPI.Buffer" href="#MPI.Buffer"><code>MPI.Buffer</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MPI.Buffer</code></pre><p>An MPI buffer for communication with a single rank. It is used for point-to-point and one-sided operations, as well as some collective operations. Operations will implicitly construct a <code>Buffer</code> when required via the generic constructor, but it can be advantageous to manually construct <code>Buffer</code>s when doing so incurs additional overhead, for example when using a non-predefined <a href="../advanced/#MPI.Datatype"><code>MPI.Datatype</code></a>.</p><p><strong>Fields</strong></p><ul><li><p><code>data</code></p><p>a Julia object referencing a region of memory to be used for communication. It is required that the object can be <code>cconvert</code>ed to an <a href="#MPI.API.MPIPtr"><code>MPIPtr</code></a>.</p></li><li><p><code>count</code></p><p>the number of elements of <code>datatype</code> in the buffer. Note that this may not correspond to the number of elements in the array if derived types are used.</p></li><li><p><code>datatype</code></p><p>the <a href="../advanced/#MPI.Datatype"><code>MPI.Datatype</code></a> stored in the buffer.</p></li></ul><p><strong>Usage</strong></p><pre><code class="nohighlight hljs">Buffer(data, count::Integer, datatype::Datatype)</code></pre><p>Generic constructor.</p><pre><code class="nohighlight hljs">Buffer(data)</code></pre><p>Construct a <code>Buffer</code> backed by <code>data</code>, automatically determining the appropriate <code>count</code> and <code>datatype</code>. Methods are provided for</p><ul><li><code>Ref</code></li><li><code>Array</code></li><li><code>CUDA.CuArray</code> if CUDA.jl is loaded.</li><li><code>AMDGPU.ROCArray</code> if AMDGPU.jl is loaded.</li><li><code>SubArray</code>s of an <code>Array</code>, <code>CUDA.CuArray</code> or <code>AMDGPU.ROCArray</code> where the layout is contiguous, sequential or blocked.</li></ul><p><strong>See also</strong></p><ul><li><a href="#MPI.Buffer_send"><code>Buffer_send</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/b6a278be622dd75c233f87bfe3e34d88f3919391/src/buffers.jl#L84-L115">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MPI.Buffer_send" href="#MPI.Buffer_send"><code>MPI.Buffer_send</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">Buffer_send(data)</code></pre><p>Construct a <a href="#MPI.Buffer"><code>Buffer</code></a> object for a send operation from <code>data</code>, allowing cases where <code>isbits(data)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/b6a278be622dd75c233f87bfe3e34d88f3919391/src/buffers.jl#L167-L172">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MPI.UBuffer" href="#MPI.UBuffer"><code>MPI.UBuffer</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MPI.UBuffer</code></pre><p>An MPI buffer for chunked collective communication, where all chunks are of uniform size.</p><p><strong>Fields</strong></p><ul><li><p><code>data</code></p><p>A Julia object referencing a region of memory to be used for communication. It is required that the object can be <code>cconvert</code>ed to an <a href="#MPI.API.MPIPtr"><code>MPIPtr</code></a>.</p></li><li><p><code>count</code></p><p>The number of elements of <code>datatype</code> in each chunk.</p></li><li><p><code>nchunks</code></p><p>The maximum number of chunks stored in the buffer. This is used only for validation, and can be set to <code>nothing</code> to disable checks.</p></li><li><p><code>datatype</code></p><p>The <a href="../advanced/#MPI.Datatype"><code>MPI.Datatype</code></a> stored in the buffer.</p></li></ul><p><strong>Usage</strong></p><pre><code class="nohighlight hljs">UBuffer(data, count::Integer, nchunks::Union{Nothing, Integer}, datatype::Datatype)</code></pre><p>Generic constructor.</p><pre><code class="nohighlight hljs">UBuffer(data, count::Integer)</code></pre><p>Construct a <code>UBuffer</code> backed by <code>data</code>, where <code>count</code> is the number of elements in each chunk.</p><p><strong>See also</strong></p><ul><li><a href="#MPI.VBuffer"><code>VBuffer</code></a>: similar, but supports chunks of non-uniform sizes.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/b6a278be622dd75c233f87bfe3e34d88f3919391/src/buffers.jl#L179-L200">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MPI.VBuffer" href="#MPI.VBuffer"><code>MPI.VBuffer</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MPI.VBuffer</code></pre><p>An MPI buffer for chunked collective communication, where chunks can be of different sizes and at different offsets.</p><p><strong>Fields</strong></p><ul><li><p><code>data</code></p><p>A Julia object referencing a region of memory to be used for communication. It is required that the object can be <code>cconvert</code>ed to an <a href="#MPI.API.MPIPtr"><code>MPIPtr</code></a>.</p></li><li><p><code>counts</code></p><p>An array containing the length of each chunk.</p></li><li><p><code>displs</code></p><p>An array containing the (0-based) displacements of each chunk.</p></li><li><p><code>datatype</code></p><p>The <a href="../advanced/#MPI.Datatype"><code>MPI.Datatype</code></a> stored in the buffer.</p></li></ul><p><strong>Usage</strong></p><pre><code class="nohighlight hljs">VBuffer(data, counts[, displs[, datatype]])</code></pre><p>Construct a <code>VBuffer</code> backed by <code>data</code>, where <code>counts[j]</code> is the number of elements in the <code>j</code>th chunk, and <code>displs[j]</code> is the 0-based displacement. In other words, the <code>j</code>th chunk occurs in indices <code>displs[j]+1:displs[j]+counts[j]</code>.</p><p>The default value for <code>displs[j] = sum(counts[1:j-1])</code>.</p><p><strong>See also</strong></p><ul><li><a href="#MPI.UBuffer"><code>UBuffer</code></a> when chunks are all of the same size.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/b6a278be622dd75c233f87bfe3e34d88f3919391/src/buffers.jl#L230-L252">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MPI.RBuffer" href="#MPI.RBuffer"><code>MPI.RBuffer</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MPI.RBuffer</code></pre><p>An MPI buffer for reduction operations (<a href="../collective/#MPI.Reduce!"><code>MPI.Reduce!</code></a>, <a href="../collective/#MPI.Allreduce!"><code>MPI.Allreduce!</code></a>, <a href="../collective/#MPI.Scan!"><code>MPI.Scan!</code></a>, <a href="../collective/#MPI.Exscan!"><code>MPI.Exscan!</code></a>).</p><p><strong>Fields</strong></p><ul><li><p><code>senddata</code></p><p>A Julia object referencing a region of memory to be used for the send buffer. It is required that the object can be <code>cconvert</code>ed to an <a href="#MPI.API.MPIPtr"><code>MPIPtr</code></a>.</p></li><li><p><code>recvdata</code></p><p>A Julia object referencing a region of memory to be used for the receive buffer. It is required that the object can be <code>cconvert</code>ed to an <a href="#MPI.API.MPIPtr"><code>MPIPtr</code></a>.</p></li><li><p><code>count</code></p><p>the number of elements of <code>datatype</code> in the buffer. Note that this may not correspond to the number of elements in the array if derived types are used.</p></li><li><p><code>datatype</code></p><p>the <a href="../advanced/#MPI.Datatype"><code>MPI.Datatype</code></a> stored in the buffer.</p></li></ul><p><strong>Usage</strong></p><pre><code class="nohighlight hljs">RBuffer(senddata, recvdata[, count, datatype])</code></pre><p>Generic constructor.</p><pre><code class="nohighlight hljs">RBuffer(senddata, recvdata)</code></pre><p>Construct a <code>Buffer</code> backed by <code>senddata</code> and <code>recvdata</code>, automatically determining the appropriate <code>count</code> and <code>datatype</code>.</p><ul><li><code>senddata</code> can be <a href="#MPI.IN_PLACE"><code>MPI.IN_PLACE</code></a></li><li><code>recvdata</code> can be <code>nothing</code> on a non-root node with <a href="../collective/#MPI.Reduce!"><code>MPI.Reduce!</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/b6a278be622dd75c233f87bfe3e34d88f3919391/src/buffers.jl#L290-L311">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MPI.API.MPIPtr" href="#MPI.API.MPIPtr"><code>MPI.API.MPIPtr</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MPI.MPIPtr</code></pre><p>A pointer to an MPI buffer. This type is used only as part of the implicit conversion in <code>ccall</code>: a Julia object can be passed to MPI by defining methods for <code>Base.cconvert(::Type{MPIPtr}, ...)</code>/<code>Base.unsafe_convert(::Type{MPIPtr}, ...)</code>.</p><p>Currently supported are:</p><ul><li><code>Ptr</code></li><li><code>Ref</code></li><li><code>Array</code></li><li><code>SubArray</code></li><li><code>CUDA.CuArray</code> if CUDA.jl is loaded.</li><li><code>AMDGPU.ROCArray</code> if AMDGPU.jl is loaded.</li></ul><p>Additionally, certain sentinel values can be used, e.g. <code>MPI_IN_PLACE</code> or <code>MPI_BOTTOM</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/b6a278be622dd75c233f87bfe3e34d88f3919391/src/buffers.jl#L34-L50">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../comm/">« Communicators</a><a class="docs-footer-nextpage" href="../pointtopoint/">Point-to-point communication »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Wednesday 5 October 2022 17:34">Wednesday 5 October 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
