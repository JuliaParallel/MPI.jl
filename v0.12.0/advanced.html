<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Advanced · MPI.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>MPI.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">MPI.jl</a></li><li><a class="toctext" href="installation.html">Installation</a></li><li><a class="toctext" href="usage.html">Usage</a></li><li><span class="toctext">Examples</span><ul><li><a class="toctext" href="examples/01-hello.html">Hello world</a></li><li><a class="toctext" href="examples/02-broadcast.html">Broadcast</a></li><li><a class="toctext" href="examples/03-reduce.html">Reduce</a></li><li><a class="toctext" href="examples/04-sendrecv.html">Send/receive</a></li></ul></li><li><span class="toctext">Reference</span><ul><li><a class="toctext" href="environment.html">Environment</a></li><li><a class="toctext" href="comm.html">Communicators</a></li><li><a class="toctext" href="pointtopoint.html">Point-to-point communication</a></li><li><a class="toctext" href="collective.html">Collective communication</a></li><li><a class="toctext" href="onesided.html">One-sided communication</a></li><li><a class="toctext" href="topology.html">Topology</a></li><li><a class="toctext" href="io.html">I/O</a></li><li class="current"><a class="toctext" href="advanced.html">Advanced</a><ul class="internal"><li><a class="toctext" href="#Object-handling-1">Object handling</a></li><li><a class="toctext" href="#Buffers-1">Buffers</a></li><li><a class="toctext" href="#Datatype-objects-1">Datatype objects</a></li><li><a class="toctext" href="#Operator-objects-1">Operator objects</a></li><li><a class="toctext" href="#Info-objects-1">Info objects</a></li></ul></li></ul></li><li><a class="toctext" href="refindex.html">Index</a></li></ul></nav><article id="docs"><header><nav><ul><li>Reference</li><li><a href="advanced.html">Advanced</a></li></ul><a class="edit-page" href="https://github.com/JuliaParallel/MPI.jl/blob/master/docs/src/advanced.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Advanced</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Advanced-1" href="#Advanced-1">Advanced</a></h1><h2><a class="nav-anchor" id="Object-handling-1" href="#Object-handling-1">Object handling</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.free" href="#MPI.free"><code>MPI.free</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">MPI.free(obj)</code></pre><p>Free the MPI object handle <code>obj</code>. This is typically used as the finalizer, and so need not be called directly unless otherwise noted.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/7536834fd4e36daaa9efb4b0b54eeb39a6b8deee/src/handle.jl#L40-L44">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.refcount_inc" href="#MPI.refcount_inc"><code>MPI.refcount_inc</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">refcount_inc()</code></pre><p>Increment the MPI reference counter. This should be called at initialization of any object which calls an MPI routine in its finalizer. A matching <a href="advanced.html#MPI.refcount_dec"><code>refcount_dec</code></a> should be added to the finalizer.</p><p>For more details, see <a href="usage.html#Finalizers-1">Finalizers</a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/7536834fd4e36daaa9efb4b0b54eeb39a6b8deee/src/environment.jl#L3-L11">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.refcount_dec" href="#MPI.refcount_dec"><code>MPI.refcount_dec</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">refcount_dec()</code></pre><p>Decrement the MPI reference counter. This should be added after an MPI call in an object finalizer, with a matching <a href="advanced.html#MPI.refcount_inc"><code>refcount_inc</code></a> when the object is initialized.</p><p>For more details, see <a href="usage.html#Finalizers-1">Finalizers</a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/7536834fd4e36daaa9efb4b0b54eeb39a6b8deee/src/environment.jl#L16-L23">source</a></section><h2><a class="nav-anchor" id="Buffers-1" href="#Buffers-1">Buffers</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.Buffer" href="#MPI.Buffer"><code>MPI.Buffer</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">MPI.Buffer</code></pre><p>An MPI buffer for communication operations.</p><p><strong>Fields</strong></p><ul><li><p><code>data</code></p><p>a Julia object referencing a region of memory to be used for communication. It is required that the object can be <code>cconvert</code>ed to an <a href="advanced.html#MPI.MPIPtr"><code>MPIPtr</code></a>.</p></li><li><p><code>count</code></p><p>the number of elements of <code>datatype</code> in the buffer. Note that this may not correspond to the number of elements in the array if derived types are used.</p></li><li><p><code>datatype</code></p><p>the <a href="advanced.html#MPI.Datatype"><code>MPI.Datatype</code></a> stored in the buffer.</p></li></ul><p><strong>Usage</strong></p><pre><code class="language-none">Buffer(data, count::Integer, datatype::Datatype)</code></pre><p>Generic constructor.</p><pre><code class="language-none">Buffer(data)</code></pre><p>Construct a <code>Buffer</code> backed by <code>data</code>, automatically determining the appropriate <code>count</code> and <code>datatype</code>. Methods are provided for</p><ul><li><code>Ref</code></li><li><code>Array</code></li><li><code>CuArray</code> if CuArrays.jl is loaded</li><li><code>SubArray</code>s of an <code>Array</code> or <code>CuArray</code> where the layout is contiguous, sequential or blocked.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/7536834fd4e36daaa9efb4b0b54eeb39a6b8deee/src/buffers.jl#L52-L77">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.Buffer_send" href="#MPI.Buffer_send"><code>MPI.Buffer_send</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">Buffer_send(data)</code></pre><p>Construct a <a href="advanced.html#MPI.Buffer"><code>Buffer</code></a> object for a send operation from <code>data</code>, allowing cases where <code>isbits(data)</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/7536834fd4e36daaa9efb4b0b54eeb39a6b8deee/src/buffers.jl#L119-L124">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.MPIPtr" href="#MPI.MPIPtr"><code>MPI.MPIPtr</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">MPI.MPIPtr</code></pre><p>A pointer to an MPI buffer. This type is used only as part of the implicit conversion in <code>ccall</code>: a Julia object can be passed to MPI by defining methods for <code>Base.cconvert(::Type{MPIPtr}, ...)</code>/<code>Base.unsafe_convert(::Type{MPIPtr}, ...)</code>.</p><p>Currently supported are:</p><ul><li><code>Ptr</code></li><li><code>Ref</code></li><li><code>Array</code></li><li><code>SubArray</code></li><li><code>CuArray</code> if CuArrays.jl is loaded.</li></ul><p>Additionally, certain sentinel values can be used, e.g. <code>MPI_IN_PLACE</code> or <code>MPI_BOTTOM</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/7536834fd4e36daaa9efb4b0b54eeb39a6b8deee/src/buffers.jl#L33-L48">source</a></section><h2><a class="nav-anchor" id="Datatype-objects-1" href="#Datatype-objects-1">Datatype objects</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.Datatype" href="#MPI.Datatype"><code>MPI.Datatype</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Datatype</code></pre><p>A <code>Datatype</code> represents the layout of the data in memory.</p><p><strong>Usage</strong></p><pre><code class="language-none">Datatype(T; commit=true)</code></pre><p>Either return the predefined <code>Datatype</code> or create a new <code>Datatype</code> for the Julia type <code>T</code>. If <code>commit=true</code>, then the <a href="advanced.html#MPI.Types.commit!"><code>Types.commit!</code></a> operation will also be applied so that it can be used for communication operations.</p><p>Note that this can only be called on types for which <code>isbitstype(T)</code> is <code>true</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaLang/julia/blob/2d5741174ce3e6a394010d2e470e4269ca54607f/base/#L0-L14">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.Types.extent" href="#MPI.Types.extent"><code>MPI.Types.extent</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">lb, extent = MPI.Types.extent(dt::MPI.Datatype)</code></pre><p>Gets the lowerbound <code>lb</code> and the extent <code>extent</code> in bytes.</p><p><strong>External links</strong></p><ul><li><code>MPI_Type_get_extent</code> man page: <a href="https://www.open-mpi.org/doc/current/man3/MPI_Type_get_extent.3.php">OpenMPI</a>, <a href="https://www.mpich.org/static/docs/latest/www3/MPI_Type_get_extent.html">MPICH</a></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/7536834fd4e36daaa9efb4b0b54eeb39a6b8deee/src/datatypes.jl#L69-L76">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.Types.create_contiguous" href="#MPI.Types.create_contiguous"><code>MPI.Types.create_contiguous</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">MPI.Types.create_contiguous(count::Integer, oldtype::MPI.Datatype)</code></pre><p>Create a derived <a href="advanced.html#MPI.Datatype"><code>Datatype</code></a> that replicates <code>oldtype</code> into <code>count</code> contiguous locations.</p><p>Note that <a href="advanced.html#MPI.Types.commit!"><code>MPI.Types.commit!</code></a> must be used before the datatype can be used for communication.</p><p><strong>External links</strong></p><ul><li><code>MPI_Type_contiguous</code> man page: <a href="https://www.open-mpi.org/doc/current/man3/MPI_Type_contiguous.3.php">OpenMPI</a>, <a href="https://www.mpich.org/static/docs/latest/www3/MPI_Type_contiguous.html">MPICH</a></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/7536834fd4e36daaa9efb4b0b54eeb39a6b8deee/src/datatypes.jl#L88-L98">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.Types.create_vector" href="#MPI.Types.create_vector"><code>MPI.Types.create_vector</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">MPI.Types.create_vector(count::Integer, blocklength::Integer, stride::Integer, oldtype::MPI.Datatype)</code></pre><p>Create a derived <a href="advanced.html#MPI.Datatype"><code>Datatype</code></a> that replicates <code>oldtype</code> into locations that consist of equally spaced blocks. </p><p>Note that <a href="advanced.html#MPI.Types.commit!"><code>MPI.Types.commit!</code></a> must be used before the datatype can be used for communication.</p><p><strong>Example</strong></p><pre><code class="language-julia">datatype = MPI.Types.create_vector(3, 2, 5, MPI.Datatype(Int64))
MPI.Types.commit!(datatype)</code></pre><p>will create a datatype with the following layout</p><pre><code class="language-none">|&lt;-----&gt;|  block length

+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| X | X |   |   |   | X | X |   |   |   | X | X |   |   |   |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

|&lt;---- stride -----&gt;|</code></pre><p>where each segment represents an <code>Int64</code>.</p><p>(image by Jonathan Dursi, <a href="https://stackoverflow.com/a/10788351/392585">https://stackoverflow.com/a/10788351/392585</a>)</p><p><strong>External links</strong></p><ul><li><code>MPI_Type_vector</code> man page: <a href="https://www.open-mpi.org/doc/current/man3/MPI_Type_vector.3.php">OpenMPI</a>, <a href="https://www.mpich.org/static/docs/latest/www3/MPI_Type_vector.html">MPICH</a></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/7536834fd4e36daaa9efb4b0b54eeb39a6b8deee/src/datatypes.jl#L110-L141">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.Types.create_subarray" href="#MPI.Types.create_subarray"><code>MPI.Types.create_subarray</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">MPI.Types.create_subarray(sizes, subsizes, offset, oldtype::Datatype;
                          rowmajor=false)</code></pre><p>Creates a derived <a href="advanced.html#MPI.Datatype"><code>Datatype</code></a> describing an <code>N</code>-dimensional subarray of size <code>subsizes</code> of an <code>N</code>-dimensional array of size <code>sizes</code> and element type <code>oldtype</code>, with the first element offset by <code>offset</code> (i.e. the 0-based index of the first element).</p><p>Column-major indexing (used by Julia and Fortran) is assumed; use the keyword <code>rowmajor=true</code> to specify row-major layout (used by C and numpy).</p><p>Note that <a href="advanced.html#MPI.Types.commit!"><code>MPI.Types.commit!</code></a> must be used before the datatype can be used for communication.</p><p><strong>External links</strong></p><ul><li><code>MPI_Type_create_subarray</code> man page: <a href="https://www.open-mpi.org/doc/current/man3/MPI_Type_create_subarray.3.php">OpenMPI</a>, <a href="https://www.mpich.org/static/docs/latest/www3/MPI_Type_create_subarray.html">MPICH</a></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/7536834fd4e36daaa9efb4b0b54eeb39a6b8deee/src/datatypes.jl#L154-L170">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.Types.create_struct" href="#MPI.Types.create_struct"><code>MPI.Types.create_struct</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">MPI.Types.create_struct(blocklengths, displacements, types)</code></pre><p>Creates a derived <a href="advanced.html#MPI.Datatype"><code>Datatype</code></a> describing a struct layout.</p><p>Note that <a href="advanced.html#MPI.Types.commit!"><code>MPI.Types.commit!</code></a> must be used before the datatype can be used for communication.</p><p><strong>External links</strong></p><ul><li><code>MPI_Type_create_struct</code> man page: <a href="https://www.open-mpi.org/doc/current/man3/MPI_Type_create_struct.3.php">OpenMPI</a>, <a href="https://www.mpich.org/static/docs/latest/www3/MPI_Type_create_struct.html">MPICH</a></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/7536834fd4e36daaa9efb4b0b54eeb39a6b8deee/src/datatypes.jl#L192-L202">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.Types.create_resized" href="#MPI.Types.create_resized"><code>MPI.Types.create_resized</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">MPI.Types.create_resized(oldtype::Datatype, lb::Integer, extent::Integer)</code></pre><p>Creates a new <a href="advanced.html#MPI.Datatype"><code>Datatype</code></a> that is identical to <code>oldtype</code>, except that the lower bound of this new datatype is set to be <code>lb</code>, and its upper bound is set to be <code>lb + extent</code>.</p><p>Note that <a href="advanced.html#MPI.Types.commit!"><code>MPI.Types.commit!</code></a> must be used before the datatype can be used for communication.</p><p><strong>See also</strong></p><ul><li><a href="advanced.html#MPI.Types.extent"><code>MPI.Types.extent</code></a></li></ul><p><strong>External links</strong></p><ul><li><code>MPI_Type_create_resized</code> man page: <a href="https://www.open-mpi.org/doc/current/man3/MPI_Type_create_resized.3.php">OpenMPI</a>, <a href="https://www.mpich.org/static/docs/latest/www3/MPI_Type_create_resized.html">MPICH</a></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/7536834fd4e36daaa9efb4b0b54eeb39a6b8deee/src/datatypes.jl#L225-L240">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.Types.commit!" href="#MPI.Types.commit!"><code>MPI.Types.commit!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">MPI.Types.commit!(newtype::Datatype)</code></pre><p>Commits a <a href="advanced.html#MPI.Datatype"><code>Datatype</code></a> so that it can be used for communication.</p><p><strong>External links</strong></p><ul><li><code>MPI_Type_commit</code> man page: <a href="https://www.open-mpi.org/doc/current/man3/MPI_Type_commit.3.php">OpenMPI</a>, <a href="https://www.mpich.org/static/docs/latest/www3/MPI_Type_commit.html">MPICH</a></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/7536834fd4e36daaa9efb4b0b54eeb39a6b8deee/src/datatypes.jl#L254-L261">source</a></section><h2><a class="nav-anchor" id="Operator-objects-1" href="#Operator-objects-1">Operator objects</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.Op" href="#MPI.Op"><code>MPI.Op</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Op</code></pre><p>An MPI reduction operator, for use with <a href="collective.html#Reduce/Scan-1">Reduce/Scan collective operations</a> to wrap binary operators. MPI.jl will perform this conversion automatically.</p><p><strong>Usage</strong></p><pre><code class="language-none">Op(op, T=Any; iscommutative=false)</code></pre><p>Wrap the Julia reduction function <code>op</code> for arguments of type <code>T</code>. <code>op</code> is assumed to be associative, and if <code>iscommutative</code> is true, assumed to be commutative as well.</p><p><strong>See also</strong></p><ul><li><a href="collective.html#MPI.Reduce!"><code>Reduce!</code></a>/<a href="collective.html#MPI.Reduce"><code>Reduce</code></a></li><li><a href="collective.html#MPI.Allreduce!"><code>Allreduce!</code></a>/<a href="collective.html#MPI.Allreduce"><code>Allreduce</code></a></li><li><a href="collective.html#MPI.Scan!"><code>Scan!</code></a>/<a href="collective.html#MPI.Scan"><code>Scan</code></a></li><li><a href="collective.html#MPI.Exscan!"><code>Exscan!</code></a>/<a href="collective.html#MPI.Exscan"><code>Exscan</code></a></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaLang/julia/blob/2d5741174ce3e6a394010d2e470e4269ca54607f/base/#L0-L18">source</a></section><h2><a class="nav-anchor" id="Info-objects-1" href="#Info-objects-1">Info objects</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.Info" href="#MPI.Info"><code>MPI.Info</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Info &lt;: AbstractDict{Symbol,String}</code></pre><p><code>MPI.Info</code> objects store key-value pairs, and are typically used for passing optional arguments to MPI functions.</p><p><strong>Usage</strong></p><p>These will typically be hidden from user-facing APIs by splatting keywords, e.g.</p><pre><code class="language-julia">function f(args...; kwargs...)
    info = Info(kwargs...)
    # pass `info` object to `ccall`
end</code></pre><p>For manual usage, <code>Info</code> objects act like Julia <code>Dict</code> objects:</p><pre><code class="language-julia">info = Info(init=true) # keyword argument is required
info[key] = value
x = info[key]
delete!(info, key)</code></pre><p>If <code>init=false</code> is used in the costructor (the default), a &quot;null&quot; <code>Info</code> object will be returned: no keys can be added to such an object.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaLang/julia/blob/2d5741174ce3e6a394010d2e470e4269ca54607f/base/#L0-L26">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MPI.infoval" href="#MPI.infoval"><code>MPI.infoval</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">infoval(x)</code></pre><p>Convert Julia object <code>x</code> to a string representation for storing in an <a href="advanced.html#MPI.Info"><code>Info</code></a> object.</p><p>The MPI specification allows passing strings, Boolean values, integers, and lists.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaParallel/MPI.jl/blob/7536834fd4e36daaa9efb4b0b54eeb39a6b8deee/src/info.jl#L60-L66">source</a></section><footer><hr/><a class="previous" href="io.html"><span class="direction">Previous</span><span class="title">I/O</span></a><a class="next" href="refindex.html"><span class="direction">Next</span><span class="title">Index</span></a></footer></article></body></html>
