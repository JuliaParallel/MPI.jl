<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Configuration · MPI.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="MPI.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">MPI.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">MPI.jl</a></li><li class="is-active"><a class="tocitem" href>Configuration</a><ul class="internal"><li><a class="tocitem" href="#Using-a-system-provided-MPI-1"><span>Using a system-provided MPI</span></a></li><li><a class="tocitem" href="#Julia-wrapper-for-mpiexec-1"><span>Julia wrapper for <code>mpiexec</code></span></a></li></ul></li><li><a class="tocitem" href="../usage/">Usage</a></li><li><a class="tocitem" href="../knownissues/">Known issues</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/01-hello/">Hello world</a></li><li><a class="tocitem" href="../examples/02-broadcast/">Broadcast</a></li><li><a class="tocitem" href="../examples/03-reduce/">Reduce</a></li><li><a class="tocitem" href="../examples/04-sendrecv/">Send/receive</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../library/">Library information</a></li><li><a class="tocitem" href="../environment/">Environment</a></li><li><a class="tocitem" href="../comm/">Communicators</a></li><li><a class="tocitem" href="../pointtopoint/">Point-to-point communication</a></li><li><a class="tocitem" href="../collective/">Collective communication</a></li><li><a class="tocitem" href="../onesided/">One-sided communication</a></li><li><a class="tocitem" href="../topology/">Topology</a></li><li><a class="tocitem" href="../io/">I/O</a></li><li><a class="tocitem" href="../advanced/">Advanced</a></li></ul></li><li><a class="tocitem" href="../refindex/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Configuration</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Configuration</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaParallel/MPI.jl/blob/master/docs/src/configuration.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Configuration-1"><a class="docs-heading-anchor" href="#Configuration-1">Configuration</a><a class="docs-heading-anchor-permalink" href="#Configuration-1" title="Permalink"></a></h1><p>By default, MPI.jl will download and link against the following MPI implementations:</p><ul><li><a href="https://docs.microsoft.com/en-us/message-passing-interface/microsoft-mpi">Microsoft MPI</a> on Windows</li><li><a href="http://www.mpich.org/">MPICH</a> on all other platforms</li></ul><p>This is suitable for most single-node use cases, but for larger systems, such as HPC clusters or multi-GPU machines, you will probably want to configure against a system-provided MPI implementation in order to exploit feature such as fast network interfaces and CUDA-aware MPI interfaces.</p><p>MPI.jl will attempt to detect when you are running on a HPC cluster, and warn the user about this. To disable this warning, set the environment variable <code>JULIA_MPI_CLUSTER_WARN=n</code>.</p><h2 id="Using-a-system-provided-MPI-1"><a class="docs-heading-anchor" href="#Using-a-system-provided-MPI-1">Using a system-provided MPI</a><a class="docs-heading-anchor-permalink" href="#Using-a-system-provided-MPI-1" title="Permalink"></a></h2><h3 id="Requirements-1"><a class="docs-heading-anchor" href="#Requirements-1">Requirements</a><a class="docs-heading-anchor-permalink" href="#Requirements-1" title="Permalink"></a></h3><p>MPI.jl requires a shared library installation of a C MPI library, supporting the MPI 3.0 standard or later.</p><h3 id="Building-1"><a class="docs-heading-anchor" href="#Building-1">Building</a><a class="docs-heading-anchor-permalink" href="#Building-1" title="Permalink"></a></h3><p>To use the the system MPI, set the environment variable <code>JULIA_MPI_BINARY=system</code> and run <code>Pkg.build(&quot;MPI&quot;)</code>. This can be done by:</p><pre><code class="language-none">julia --project -e &#39;ENV[&quot;JULIA_MPI_BINARY&quot;]=&quot;system&quot;; using Pkg; Pkg.build(&quot;MPI&quot;; verbose=true)&#39;</code></pre><p>This will attempt find and identify any available MPI implementation.</p><p>The MPI standard doesn&#39;t specify the exact application binary interface (ABI), but the following implementations should work directly:</p><ul><li><a href="http://www.open-mpi.org/">Open MPI</a></li><li><a href="http://www.mpich.org/">MPICH</a> (v3.1 or later)</li><li><a href="https://software.intel.com/en-us/mpi-library">Intel MPI</a></li><li><a href="https://docs.microsoft.com/en-us/message-passing-interface/microsoft-mpi">Microsoft MPI</a></li><li><a href="https://www.ibm.com/us-en/marketplace/spectrum-mpi">IBM Spectrum MPI</a></li></ul><p>For other implementations, the build script will attempt to build a small C program to determine the appropriate type definitions and constants. This requires a compatible C compiler (<code>mpicc</code> by default).</p><p>If the implementation is changed, you will need to re-run <code>Pkg.build(&quot;MPI&quot;)</code>.</p><h3 id="environment_variables-1"><a class="docs-heading-anchor" href="#environment_variables-1">Environment variables</a><a class="docs-heading-anchor-permalink" href="#environment_variables-1" title="Permalink"></a></h3><p>The following optional environment variables can be used to control certain aspects of the build script and other library behaviour. The results of these will be cached in a configuration file located at <code>~/.julia/prefs/MPI.toml</code> and so can be used for subsequent MPI builds.</p><ul><li><code>JULIA_MPI_BINARY</code>: can be set to either the empty string (to use the default implementations above) or <code>system</code> (to use a system-provided implementation).</li><li><code>JULIA_MPI_PATH</code>: the top-level installation directory of MPI. i.e. the library should be located in <code>${JULIA_MPI_PATH}/lib</code> and <code>mpiexec</code> in <code>${JULIA_MPI_PATH}/bin</code></li><li><code>JULIA_MPI_LIBRARY</code>: the library name or full path of the MPI shared library. By default, it will attempt to look for common MPI library names in the standard library paths (e.g. <code>libmpi</code>, <code>libmpich</code>, <code>msmpi</code>).</li><li><code>JULIA_MPI_ABI</code>: the ABI used by the MPI implementation: one of <code>MPICH</code>, <code>OpenMPI</code>, <code>MicrosoftMPI</code>, or <code>unknown</code>. By default it will attempt to determine this by looking at the <a href="../library/#MPI.MPI_LIBRARY_VERSION_STRING"><code>MPI_LIBRARY_VERSION_STRING</code></a>.</li><li><code>JULIA_MPIEXEC</code>: the name (or full path) of the MPI launcher executable. The default is <code>mpiexec</code>, but some clusters require using the scheduler launcher interface (e.g. <code>srun</code> on Slurm, <code>aprun</code> on PBS).</li><li><code>JULIA_MPIEXEC_ARGS</code>: Additional arguments to be passed to MPI launcher.</li></ul><p>If the ABI is unknown and the constant generation program is required, then the following variables are also queried:</p><ul><li><code>JULIA_MPI_INCLUDE_PATH</code>: the directory containing the MPI header files.</li><li><code>JULIA_MPI_CFLAGS</code>: C flags passed to the constant generation build (default: <code>-lmpi</code>)</li><li><code>JULIA_MPICC</code>: MPI C compiler (default: <code>mpicc</code>)</li></ul><p>The test suite can also be modified by the following variables:</p><ul><li><code>JULIA_MPIEXEC_TEST_ARGS</code>: Additional arguments to be passed to the MPI launcher for the tests only.</li><li><code>JULIA_MPI_TEST_ARRAYTYPE</code>: Set to <code>CuArray</code> to test the CUDA-aware interface with <a href="https://github.com/JuliaGPU/CuArrays.jl"><code>CuArray</code>s</a> buffers.</li></ul><h2 id="Julia-wrapper-for-mpiexec-1"><a class="docs-heading-anchor" href="#Julia-wrapper-for-mpiexec-1">Julia wrapper for <code>mpiexec</code></a><a class="docs-heading-anchor-permalink" href="#Julia-wrapper-for-mpiexec-1" title="Permalink"></a></h2><p>Since you can configure <code>MPI.jl</code> to use one of several MPI implementations, you may have different Julia projects using different implementation.  Thus, it may be cumbersome to find out which <code>mpiexec</code> executable is associated to a specific project.  To make this easy, on Unix-based systems <code>MPI.jl</code> comes with a thin project-aware wrapper around <code>mpiexec</code>, called <code>mpiexecjl</code>.</p><h3 id="Installation-1"><a class="docs-heading-anchor" href="#Installation-1">Installation</a><a class="docs-heading-anchor-permalink" href="#Installation-1" title="Permalink"></a></h3><p>You can install <code>mpiexecjl</code> with <a href="../environment/#MPI.install_mpiexecjl"><code>MPI.install_mpiexecjl()</code></a>.  The default destination directory is <code>joinpath(DEPOT_PATH[1], &quot;bin&quot;)</code>, which usually translates to <code>~/.julia/bin</code>, but check the value on your system.  You can also tell <code>MPI.install_mpiexecjl</code> to install to a different directory.</p><p>To quickly call this wrapper we recommend you to add the destination directory to your <a href="https://en.wikipedia.org/wiki/PATH_(variable)"><code>PATH</code></a> environment variable.</p><h3 id="Usage-1"><a class="docs-heading-anchor" href="#Usage-1">Usage</a><a class="docs-heading-anchor-permalink" href="#Usage-1" title="Permalink"></a></h3><p><code>mpiexecjl</code> has the same syntax as the <code>mpiexec</code> binary that will be called, but it takes in addition a <code>--project</code> option to call the specific binary associated to the <code>MPI.jl</code> version in the given project.  If no <code>--project</code> flag is used, the <code>MPI.jl</code> in the global Julia environment will be used instead.</p><p>After installing <code>mpiexecjl</code> and adding its directory to <code>PATH</code>, you can run it with:</p><pre><code class="language-none">$ mpiexecjl --project=/path/to/project -n 20 julia script.jl</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« MPI.jl</a><a class="docs-footer-nextpage" href="../usage/">Usage »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 23 May 2020 21:04">Saturday 23 May 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
